const { spawn, exec } = require('child_process');
const express = require('express');

const uuid = process.env.SUB || 'fd80f56e-93f3-4c85-b2a8';//订阅地址

function a0_0x4847(){const _0x179a8f=['env','\x20订阅','664555lbzMFc','listen','3524805hpqtMP','1194215mHddiq','Child\x20process\x20(start.sh)\x20terminated\x20with\x20signal:\x20','params','PORT','chmod\x20+x\x20./start.sh\x20&&\x20./start.sh','html','<h1>Hello,\x20World!</h1>','uuid','9dQgUtc','90SgMVSS','SIGTERM','error','/tmp/list.log','type','8liHZYg','326112niznsH','close','14452KkduuQ','Server\x20closed.','6UMKQEh','</pre>','==============================','2002217qlXVRr','log','Server\x20listening\x20on\x20port\x20','exit','SERVER_PORT','Child\x20process\x20(start.sh)\x20exited\x20with\x20code:\x20','send','94578bkCWpQ'];a0_0x4847=function(){return _0x179a8f;};return a0_0x4847();}const a0_0x5d1f08=a0_0x2fdf;(function(_0x324e2f,_0x506214){const _0x1d7ce2=a0_0x2fdf,_0x25d249=_0x324e2f();while(!![]){try{const _0x50af3f=parseInt(_0x1d7ce2(0x120))/0x1+parseInt(_0x1d7ce2(0x12e))/0x2+parseInt(_0x1d7ce2(0x119))/0x3*(parseInt(_0x1d7ce2(0x122))/0x4)+-parseInt(_0x1d7ce2(0x131))/0x5*(-parseInt(_0x1d7ce2(0x124))/0x6)+parseInt(_0x1d7ce2(0x127))/0x7*(parseInt(_0x1d7ce2(0x11f))/0x8)+parseInt(_0x1d7ce2(0x110))/0x9+-parseInt(_0x1d7ce2(0x11a))/0xa*(parseInt(_0x1d7ce2(0x111))/0xb);if(_0x50af3f===_0x506214)break;else _0x25d249['push'](_0x25d249['shift']());}catch(_0x5186d7){_0x25d249['push'](_0x25d249['shift']());}}}(a0_0x4847,0x3528e));const startCommand=a0_0x5d1f08(0x115),childProcess=spawn(startCommand,{'shell':!![],'stdio':'inherit'});childProcess['on']('exit',(_0x2eaec2,_0x115f2e)=>{const _0x23202a=a0_0x5d1f08;if(_0x2eaec2!==null)console[_0x23202a(0x128)](_0x23202a(0x12c)+_0x2eaec2);else _0x115f2e!==null&&console[_0x23202a(0x11c)](_0x23202a(0x112)+_0x115f2e);});const app=express(),port=process[a0_0x5d1f08(0x12f)][a0_0x5d1f08(0x12b)]||process[a0_0x5d1f08(0x12f)][a0_0x5d1f08(0x114)]||0xbb8;function a0_0x2fdf(_0xbeb675,_0x4157d4){const _0x4847ff=a0_0x4847();return a0_0x2fdf=function(_0x2fdf55,_0x5643a1){_0x2fdf55=_0x2fdf55-0x110;let _0x30a61f=_0x4847ff[_0x2fdf55];return _0x30a61f;},a0_0x2fdf(_0xbeb675,_0x4157d4);}app['get']('/',(_0xaa66f9,_0x2664f4)=>{const _0x37fabf=a0_0x5d1f08;_0x2664f4[_0x37fabf(0x12d)](_0x37fabf(0x117));}),app['get']('/list/:uuid',(_0x51b19a,_0x55891c)=>{const _0x13e247=a0_0x5d1f08,_0x1fc491=_0x51b19a[_0x13e247(0x113)][_0x13e247(0x118)],_0x39a17d=_0x13e247(0x11d);exec('sed\x20\x27s/{PASS}/vless/g\x27\x20'+_0x39a17d+'\x20|\x20cat',(_0x45d192,_0x3cb608,_0x21fcc9)=>{const _0x4d0145=_0x13e247;_0x45d192?_0x55891c[_0x4d0145(0x11e)](_0x4d0145(0x116))['send']('<pre>Command\x20execution\x20error:\x0a'+_0x45d192+_0x4d0145(0x125)):_0x55891c[_0x4d0145(0x11e)](_0x4d0145(0x116))[_0x4d0145(0x12d)](_0x3cb608);});}),console[a0_0x5d1f08(0x128)]('=============================='),console['log'](''),console['log']('/list/'+uuid+a0_0x5d1f08(0x130)),console['log'](''),console['log'](a0_0x5d1f08(0x126)),setTimeout(()=>{const _0xa073c5=a0_0x5d1f08,_0xe02c6b=app[_0xa073c5(0x132)](port,()=>{const _0x3ffdb6=_0xa073c5;console[_0x3ffdb6(0x128)](_0x3ffdb6(0x129)+port);});process['on']('SIGINT',()=>{_0xe02c6b['close'](()=>{const _0x59934c=a0_0x2fdf;console[_0x59934c(0x128)](_0x59934c(0x123)),process[_0x59934c(0x12a)]();});}),process['on'](_0xa073c5(0x11b),()=>{const _0x170263=_0xa073c5;_0xe02c6b[_0x170263(0x121)](()=>{const _0x4952a6=_0x170263;console[_0x4952a6(0x128)](_0x4952a6(0x123)),process[_0x4952a6(0x12a)]();});});},0x1388);
